'use client';

import MusicLayout from '@/app/music/MusicLayout';
import Centerblock from '@/components/Centerblock/Centerblock';
import { setPagePlaylist, resetFilters } from '@/store/features/trackSlice';

import { useEffect } from 'react';
import { useAppDispatch, useAppSelector } from '@/store/store';

export default function Home() {
  const { fetchError, fetchIsLoading, allTracks } = useAppSelector(
    (state) => state.tracks,
  );
  const dispatch = useAppDispatch();

  useEffect(() => {
    if (allTracks.length) {
      dispatch(setPagePlaylist(allTracks));
      dispatch(resetFilters());
    }
  }, [allTracks, dispatch]);

  return (
    <MusicLayout>
      <Centerblock
        tracks={allTracks}
        isLoading={fetchIsLoading}
        errorRes={fetchError}
        itemName="Треки"
      />
    </MusicLayout>
  );
}
